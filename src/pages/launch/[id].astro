---
import LaunchDetail from "src/components/LaunchDetail.astro";
import Layout from "../../layouts/Layout.astro";
import { getLaunchBy, getLaunches } from "../../services/launches";


const { id } = Astro.params;

let launch;

if (id) {
  launch = await getLaunchBy({ id });
}

export async function getStaticPaths() {
  const launches = await getLaunches();
  return launches.map((launch) => ({
    params: { id: launch.id },
  }));
}
---

{
  launch && (
    <Layout title={`Launch ${launch.flight_number}`}>
      <LaunchDetail launch={launch}/>
    </Layout>
  )
}
